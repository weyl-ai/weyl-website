---
// Custom head for Starlight docs pages
// Provides proper OG images with page-specific information
import type { Props } from '@astrojs/starlight/props';

const { entry } = Astro.props;
const pageTitle = entry.data.title || 'Documentation';
const pageDescription = entry.data.description || 'API documentation and guides for building with Weyl';
const path = Astro.url.pathname;

// Map paths to specific OG images
const ogImageMap: Record<string, string> = {
  '/getting-started/': 'og-getting-started.png',
  '/api/': 'og-api.png',
  '/workflows/': 'og-workflows.png',
  '/workflows/cursor/': 'og-workflows-cursor.png',
  '/workflows/claude/': 'og-workflows-claude.png',
  '/workflows/v0/': 'og-workflows-v0.png',
  '/workflows/lovable/': 'og-workflows-lovable.png',
  '/workflows/bolt/': 'og-workflows-bolt.png',
};

// Find matching OG image or use fallback
let ogImageFile = 'og-docs.png';
for (const [prefix, file] of Object.entries(ogImageMap)) {
  if (path.startsWith(prefix)) {
    ogImageFile = file;
    break;
  }
}

// Use Astro's site config
const siteUrl = Astro.site?.href || 'https://weyl.ai';
const ogImage = new URL(`/${ogImageFile}`, siteUrl).href;
---

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

<!-- Enhanced OG metadata with page-specific info -->
<meta property="og:title" content={`${pageTitle} | Weyl`} />
<meta property="og:description" content={pageDescription} />
<meta property="og:image" content={ogImage} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content={pageTitle} />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Weyl" />

<!-- Twitter Card with page-specific info -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@weyl_ai" />
<meta name="twitter:title" content={`${pageTitle} | Weyl`} />
<meta name="twitter:description" content={pageDescription} />
<meta name="twitter:image" content={ogImage} />
<meta name="twitter:image:alt" content={pageTitle} />

