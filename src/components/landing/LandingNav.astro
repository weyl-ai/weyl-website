---
// src/components/landing/LandingNav.astro
// Minimal nav for landing page following Vercel/GitHub style
import SocialIcons from '@components/ui/SocialIcons.astro';

const navItems = [
  { label: '.plan', href: '/plan/' },
  { label: 'digital research lab', href: '/posters/' },
  { label: 'archive', href: '/archive/' },
  { label: 'open source', href: '/open-source/' },
  { label: 'weyl standard', href: '/std/index/' },
];
---

<header class="fixed top-0 left-0 right-0 z-50 border-b border-border bg-bg-primary/80 backdrop-blur-md">
  <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
    <!-- Logo - switches between blue and black based on theme -->
    <a href="/" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
      <img src="/brand/weyl-monotile-blue.svg" alt="WEYL" class="h-6 w-auto logo-dark" />
      <img src="/brand/weyl-monotile-black.svg" alt="WEYL" class="h-6 w-auto logo-light" />
    </a>
    
    <!-- Desktop Navigation -->
    <nav class="hidden md:flex font-mono text-small items-center gap-6">
      <ul class="flex items-center gap-1">
        {navItems.map((item, index) => (
          <>
            {index > 0 && <li class="text-text-subtle px-2">//</li>}
            <li>
              <a 
                href={item.href}
                class="text-text-secondary hover:text-brand-primary transition-colors px-3 py-2 block"
              >
                {item.label}
              </a>
            </li>
          </>
        ))}
      </ul>
      
      <!-- Social links with // delimiter -->
      <span class="text-text-subtle">//</span>
      
      <SocialIcons size="md" />
    </nav>

    <!-- Mobile Hamburger Button -->
    <button
      id="mobile-menu-button"
      class="md:hidden flex flex-col gap-1.5 p-2 text-text-secondary hover:text-brand-primary transition-colors"
      aria-label="Toggle menu"
      aria-expanded="false"
    >
      <span id="hamburger-line-1" class="w-6 h-0.5 bg-current transition-all duration-300"></span>
      <span id="hamburger-line-2" class="w-6 h-0.5 bg-current transition-all duration-300"></span>
      <span id="hamburger-line-3" class="w-6 h-0.5 bg-current transition-all duration-300"></span>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="md:hidden hidden fixed top-[73px] left-0 right-0 bg-bg-primary border-b border-border backdrop-blur-md"
  >
    <nav class="px-6 py-6 font-mono text-small">
      <ul class="space-y-4">
        {navItems.map((item) => (
          <li>
            <a 
              href={item.href}
              class="text-text-secondary hover:text-brand-primary transition-colors block py-2"
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>
      
      <div class="mt-6 pt-6 border-t border-border">
        <SocialIcons size="md" />
      </div>
    </nav>
  </div>
</header>

<script>
  const menuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const line1 = document.getElementById('hamburger-line-1');
  const line2 = document.getElementById('hamburger-line-2');
  const line3 = document.getElementById('hamburger-line-3');

  if (menuButton && mobileMenu) {
    menuButton.addEventListener('click', () => {
      const isOpen = !mobileMenu.classList.contains('hidden');
      
      if (isOpen) {
        // Close menu
        mobileMenu.classList.add('hidden');
        menuButton.setAttribute('aria-expanded', 'false');
        line1?.classList.remove('rotate-45', 'translate-y-2');
        line2?.classList.remove('opacity-0');
        line3?.classList.remove('-rotate-45', '-translate-y-2');
      } else {
        // Open menu
        mobileMenu.classList.remove('hidden');
        menuButton.setAttribute('aria-expanded', 'true');
        line1?.classList.add('rotate-45', 'translate-y-2');
        line2?.classList.add('opacity-0');
        line3?.classList.add('-rotate-45', '-translate-y-2');
      }
    });

    // Close menu when clicking on a link
    const mobileLinks = mobileMenu.querySelectorAll('a');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
        menuButton.setAttribute('aria-expanded', 'false');
        line1?.classList.remove('rotate-45', 'translate-y-2');
        line2?.classList.remove('opacity-0');
        line3?.classList.remove('-rotate-45', '-translate-y-2');
      });
    });
  }
</script>

<style>
  /* Show/hide logos based on theme */
  .logo-light {
    display: none !important;
  }

  :global([data-theme="light"]) .logo-dark {
    display: none !important;
  }

  :global([data-theme="light"]) .logo-light {
    display: block !important;
  }
</style>

